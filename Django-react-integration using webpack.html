<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
        integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">


    <title>Django-react Integration Guide</title>
    <style>
        * {
            box-sizing: border-box;
        }

        body {
            background-color: aqua;
        }

        h4 {
            color: blue;
            margin-left: 20px;
            margin-right: 20px;
            margin-top: 20px;
            font-weight: 400;
        }

        span {
            font-size: large;
            color: green;
        }

        li {
            color: green;
            font-size: large;
        }

        .div-width {
            width: fit-content;
        }

        #special-width {
            width: 500px;
        }

        @media(max-width: 768px) {
            .div-width {
                width: 315px;
            }

            #special-width {
                width: 315px;
            }
        }
    </style>
</head>

<body>
    <h2 class="text-center pt-2" style="color: blue;">Django-react Integration using webpack</h2>
    <hr color="blue">

    <h4>1. Install python and node js.</h4>
    <h4>2. Create a folder in which you are going to keep the two projects.</h4>
    <h4>3. Install virtualenv and create it using command - </h4>
    <div class="mx-auto" style="border: 1px solid blue; background-color: white; width:fit-content; padding: 10px;">
        <span>virtualenv</span> <span style="background-color: yellow">virtualenv_name</span>
    </div>
    <h4 class="text-center pb-3">Or,</h4>
    <div class="mx-auto" style="border: 1px solid blue; background-color: white; width:fit-content; padding: 10px; ">
        <span>virtualenv .</span>
    </div>
    <h4>4. Activate the virtualenv using command - </h4>
    <div class="mx-auto" style="border: 1px solid blue; background-color: white; width:fit-content; padding: 10px; ">
        <span>.\Scripts\activate</span>
    </div>
    <h4>5. In the virtualenv, install django using the command in the terminal - </h4>
    <div class="mx-auto" style="border: 1px solid blue; background-color: white; width:fit-content; padding: 10px; ">
        <span>pip install django</span>
    </div>
    <h4 class="text-center">Create the django project...</h4>
    <div class="mx-auto" style="border: 1px solid blue; background-color: white; width:fit-content; padding: 10px; ">
        <span>django-admin startproject</span> <span style="background-color: yellow;">myproject</span>
    </div>
    <h4>6. Apply all django database migrations (optional).</h4>
    <h4>7. Go to the root directory.</h4>
    <h4>8. Create app ‘frontend’ using given command and add the app to the <span
            style="font-size: 25px; color: brown;">Installed Apps</span> in the project's <span
            style="font-size: 25px; color: brown;">settings.py</span> file - </h4>
    <div class="mx-auto" style="border: 1px solid blue; background-color: white; width:fit-content; padding: 10px; ">
        <span>python manage.py startapp</span> <span style="background-color: yellow;">frontend</span>
    </div>
    <div class="mx-auto d-block mt-3 pr-3 pt-3" id="special-width"
        style="border: 1px solid blue; background-color: white;">
        <pre style="font-size: large; color: green;">
            INSTALLED_APPS = [
                'django.contrib.admin',
                'django.contrib.auth',
                'django.contrib.contenttypes',
                'django.contrib.sessions',
                'django.contrib.messages',
                'django.contrib.staticfiles',
                <span style="background-color: yellow;">'frontend',</span>
            ]</pre>
    </div>
    <h4 class="ml-5">Please make sure your directory structure is as follows :</h4>
    <div class="mx-auto" style="border: 1px solid blue; background-color: white; width: 315px;">
        <h4 style="color: red; margin-left: 10%;">Folder_name</h4>
        <ul style="margin-left: 10%;">
            <li>myproject</li>
            <ul>
                <li>frontend</li>
                <li>myproject</li>
                <li>db.sqlite3</li>
                <li>manage.py</li>
            </ul>
            <li>Lib</li>
            <li>node_modules</li>
            <li>Scripts</li>
            <li>.babelrc</li>
            <li>package-lock.json</li>
            <li>package.json</li>
            <li>pyvenv.cfg</li>
            <li>webpack.config.js</li>
        </ul>
    </div>
    <h4>9. Create directories for react...</h4>
    <div class="mx-auto" style="border: 1px solid blue; background-color: white; width: 315px; padding-right: 40px; ">
        <h4 style="color: red; margin-left: 10%;">frontend</h4>
        <ul style="margin-left: 10%;">
            <li>src (All components of react)</li>
            <ul>
                <li>components</li>
            </ul>
            <li>static (compiled js)</li>
            <ul>
                <li>frontend</li>
            </ul>
            <li>templates (contains index.html)</li>
            <ul>
                <li>frontend</li>
            </ul>
            <li>manage.py</li>
        </ul>
    </div>
    <h4>10. Initialize npm to create package.json file with all your javascript dependencies.</h4>
    <div class="mx-auto" style="border: 1px solid blue; background-color: white; width:fit-content; padding: 10px; ">
        <span>npm init</span>
    </div>
    <h4>11. Install webpack and webpack cli.</h4>
    <div class="mx-auto" style="border: 1px solid blue; background-color: white; width:fit-content; padding: 10px; ">
        <span>npm i -D webpack webpack-cli</span>
    </div>
    <h4>12. Install babel</h4>
    <div class="mx-auto div-width" style="border: 1px solid blue; background-color: white;  padding: 10px; ">
        <span>npm i -D @babel/core babel-loader @babel/preset-env @babel/preset-react
            babel-plugin-transform-class-properties</span>
    </div>
    <h4>13. Install react and react-dom</h4>
    <div class="mx-auto" style="border: 1px solid blue; background-color: white; width:fit-content; padding: 10px; ">
        <span>npm i react react-dom prop-types</span>
    </div>
    <h4>14. Create a <span style="font-size: 25px; color: brown;">.babelrc</span> file and a <span
            style="font-size: 25px; color: brown;">webpack.config.js</span> file in the root directory.</h4>
    <div class="mx-auto" style="border: 1px solid blue; background-color: white; width: 220px;; padding: 10px; ">
        <ul>
            <li>myproject</li>
            <li>Lib</li>
            <li>node modules</li>
            <li>package.json</li>
            <li>package-lock.json</li>
            <li style="background-color: yellow;">.babelrc</li>
            <li style="background-color: yellow;">webpack.config.js</li>
        </ul>
    </div>
    <h4>15. Edit the <span style="font-size: 25px; color: brown;">.babelrc</span> file as follows :</h4>
    <div class="mx-auto div-width pt-2" style="border: 1px solid blue; background-color: white;  padding-right: 40px; ">
        <pre style="font-size: large; color: green;">
            {
                "presets": ["@babel/preset-env", "@babel/preset-react"],
                "plugins": ["transform-class-properties"]
            }</pre>
    </div>
    <h4>16. Edit the <span style="font-size: 25px; color: brown;">webpack.config.js</span> file as follows :</h4>
    <div class="mx-auto div-width pt-2" style="border: 1px solid blue; background-color: white;  padding-right: 50px; ">
        <pre style="font-size: large; color: green;">
            module.exports = {
                module : {
                    rules : [
                        {
                            test: /\.js$/,
                            exclude: /node_modules/,
                            use: {
                                loader: "babel-loader"
                            }
                        }
                    ]
                }
            }</pre>
    </div>
    <h4>17. Edit the <span style="font-size: 25px; color: brown;">package.json</span> file as follows :</h4>
    <div class="mx-auto div-width pt-2" style="border: 1px solid blue; background-color: white; padding-right: 30px; ">
        <pre style="font-size: large; color: green;">
            {
                "name": "lead-manager",
                "version": "1.0.0",
                "description": "",
                "main": "index.js",
                "scripts": {
                  "dev": "webpack --mode development ./<span style="background-color: yellow;">myproject</span>/frontend/src/index.js --output 
                            ./<span style="background-color: yellow;">myproject</span>/frontend/static/frontend/main.js",
                  "build": "webpack --mode production ./<span style="background-color: yellow;">myproject</span>/frontend/src/index.js --output 
                            ./<span style="background-color: yellow;">myproject</span>/frontend/static/frontend/main.js"
                },
                "author": "",
                "license": "ISC",
                "devDependencies": {
                  "@babel/core": "^7.9.6",
                  "@babel/preset-env": "^7.9.6",
                  "@babel/preset-react": "^7.9.4",
                  "babel-loader": "^8.1.0",
                  "babel-plugin-transform-class-properties": "^6.24.1",
                  "webpack": "^4.43.0",
                  "webpack-cli": "^3.3.11"
                },
                "dependencies": {
                  "prop-types": "^15.7.2",
                  "react": "^16.13.1",
                  "react-dom": "^16.13.1"
                }
              }</pre>
    </div>
    <h4>18. In the <span style="font-size: 25px; color: brown;">frontend/src</span>, create the file <span
            style="font-size: 25px; color: brown;">index.js</span> as per the directory structure shown below :</h4>
    <div class="mx-auto"
        style="border: 1px solid blue; background-color: white; width:fit-content; padding-right: 40px; ">
        <h4 style="color: red; margin-left: 10%;">frontend</h4>
        <ul style="margin-left: 10%;">
            <li>src</li>
            <ul>
                <li>components</li>
                <li>index.js</li>
            </ul>
        </ul>
    </div>
    <h4>19. In the <span style="font-size: 25px; color: brown;">frontend/src/components</span>, create the file
        <span style="font-size: 25px; color: brown;">App.js</span> as per the directory structure shown below :</h4>
    <div class="mx-auto"
        style="border: 1px solid blue; background-color: white; width:fit-content; padding-right: 40px; ">
        <h4 class="mt-2" style="color: red; margin-left: 10%;">frontend</h4>
        <ul style="margin-left: 10%;">
            <li>src</li>
            <ul>
                <li>components</li>
                <ul>
                    <li>App.js</li>
                </ul>
                <li>index.js</li>
            </ul>
        </ul>
    </div>
    <h4>20. Edit the <span style="font-size: 25px; color: brown;">App.js</span> file as follows :</h4>
    <div class="mx-auto div-width pt-2" style="border: 1px solid blue; background-color: white;  padding-right: 27px; ">
        <pre style="font-size: large; color: green;">
            import React, { Component } from 'react';
            import ReactDOM from 'react-dom';

            class App extends Component {
                render() {
                    return (
                        <span><</span><span>h1</span><span>></span>React app working in django server...<span><</span><span>/</span><span>h1</span><span>></span>
                    )
                }
            }

            ReactDOM.render(<span><</span><span>App</span><span>/</span><span>></span>, document.getElementById('app'));</pre>
    </div>
    <h4>21. Edit the <span style="font-size: 25px; color: brown;">index.js</span> file as follows :</h4>
    <div class="mx-auto div-width" style="border: 1px solid blue; background-color: white;">
        <pre class="py-2 px-4 mb-0" style="font-size: large; color: green;">import App from './components/App';</pre>
    </div>
    <h4 class="mr-5">22. Create an <span style="font-size: 25px; color: brown;">index.html</span> file in <span
            style="font-size: 25px; color: brown;">frontend/templates/frontend</span> as per the directory structure
        shown below :</h4>
    <div class="mx-auto"
        style="border: 1px solid blue; background-color: white; width:fit-content; padding-right: 40px; ">
        <h4 class="mt-2" style="color: red; margin-left: 10%;">frontend</h4>
        <ul style="margin-left: 10%;">
            <li>src</li>
            <ul>
                <li>components</li>
                <ul>
                    <li>App.js</li>
                </ul>
                <li>index.js</li>
            </ul>
            <li>static</li>
            <ul>
                <li>frontend</li>
            </ul>
            <li>templates</li>
            <ul>
                <li>frontend</li>
                <ul>
                    <li>index.html</li>
                </ul>
            </ul>
            <li>manage.py</li>
        </ul>
    </div>
    <h4>23. Edit the <span style="font-size: 25px; color: brown;">body</span> tag of <span
            style="font-size: 25px; color: brown;">index.html</span> file as follows :</h4>
    <div class="mx-auto div-width" style="border: 1px solid blue; background-color: white;  padding-right: 27px; ">
        <pre class="my-2" style="font-size: large; color: green;">
            <span><</span>body<span>></span>
                {% load static %}
                <span><</span><span>div</span> id="app"<span>></span><span><</span><span>/</span><span>div></span>
                <span><</span>script src="{% static 'frontend/main.js' %}"<span>></span><span><</span><span>/</span>script<span>></span>
            <span><</span>/body<span>></span></pre>
    </div>
    <h4>24. Edit the project's <span style="font-size: 25px; color: brown;">urls.py</span> file as follows :</h4>
    <div class="mx-auto div-width" style="border: 1px solid blue; background-color: white;  padding-right: 27px; ">
        <pre class="my-2" style="font-size: large; color: green;">
            from django.contrib import admin
            from django.urls import path, include

            urlpatterns = [
                path('admin/', admin.site.urls),
                path('', include('frontend.urls')),
            ]</pre>
    </div>
    <h4>25. Create <span style="font-size: 25px; color: brown;">urls.py</span> file in the <span
            style="font-size: 25px; color: brown;">frontend</span> folder as per the directory structure shown
        below:
    </h4>
    <div class="mx-auto"
        style="border: 1px solid blue; background-color: white; width:fit-content; padding-right: 40px; ">
        <h4 class="mt-2" style="color: red; margin-left: 10%;">frontend</h4>
        <ul style="margin-left: 10%;">
            <li>__pycache__</li>
            <li>migrations</li>
            <li>src</li>
            <li>static</li>
            <li>templates</li>
            <li>__init__.py</li>
            <li>admin.py</li>
            <li>models.py</li>
            <li>tests.py</li>
            <li>urls.py</li>
            <li>views.py</li>
        </ul>
    </div>
    <h4>26. Edit the <span style="font-size: 25px; color: brown;">frontend</span>'s <span
            style="font-size: 25px; color: brown;">urls.py</span> file as follows :</h4>
    <div class="mx-auto div-width" style="border: 1px solid blue; background-color: white;  padding-right: 27px; ">
        <pre class="my-2" style="font-size: large; color: green;">
            from django.urls import path
            from . import views
            
            urlpatterns = [
                path('', views.index)
            ]</pre>
    </div>
    <h4>27. Edit the <span style="font-size: 25px; color: brown;">frontend</span>'s <span
            style="font-size: 25px; color: brown;">views.py</span> file as follows :</h4>
    <div class="mx-auto div-width" style="border: 1px solid blue; background-color: white;  padding-right: 27px; ">
        <pre class="my-2" style="font-size: large; color: green;">
            from django.shortcuts import render

            def index(request):
                return render(request, 'frontend/index.html')</pre>
    </div>
    <h4>28. Now run the following command in the terminal...</h4>
    <div class="mx-auto" style="border: 1px solid blue; background-color: white; width:fit-content; padding: 10px; ">
        <span>npm run dev</span>
    </div>
    <div class="mx-auto div-width"
        style="border: 1px solid blue; background-color: white;  padding: 10px;  margin-top: 5px;">
        <span style="color: red;">Note : </span><span>Be sure your virtual environment is activated during the
            time.</span>
    </div>
    <h4 class="ml-5">This command is gonna create the <span style="font-size: 25px; color: brown;">main.js</span>
        file in <span style="font-size: 25px; color: brown;">frontend/static/frontend/</span> as per the directory
        structure shown
        below :</h4>
    <div class="mx-auto"
        style="border: 1px solid blue; background-color: white; width:fit-content; padding-right: 40px; ">
        <h4 class="mt-2" style="color: red; margin-left: 10%;">frontend</h4>
        <ul style="margin-left: 10%;">
            <li>src</li>
            <ul>
                <li>components</li>
                <ul>
                    <li>App.js</li>
                </ul>
                <li>index.js</li>
            </ul>
            <li>static</li>
            <ul>
                <li>frontend</li>
                <ul>
                    <li>main.js</li>
                </ul>
            </ul>
            <li>templates</li>
            <ul>
                <li>frontend</li>
                <ul>
                    <li>index.html</li>
                </ul>
            </ul>
            <li>manage.py</li>
        </ul>
    </div>
    <h4>29. And Boom........ We've done that.......</h4>
    <h4>30. Now start the django server using the given command and see the magic...</h4>
    <div class="mx-auto" style="border: 1px solid blue; background-color: white; width:fit-content; padding: 10px; ">
        <span>python manage.py runserver</span>
    </div>
    <h4>31. You would see that <span style="font-size: 25px; color: brown;">React app working in django
            server.....</span>is
        printed on the browser page.</h4>
    <h4>32. The Last Thing...</h4>
    <h4 class="mx-5">In this case you would have to run <span style="font-size: 25px; color: brown;">npm
            run dev</span> every time you make any change in the project.</h4>
    <h4 class="mx-5">To solve this issue, just add
        <span style="font-size: 25px; color: brown;">--watch</span> in the scripts section of
        <span style="font-size: 25px; color: brown;">package.json</span> file as shown below.</h4>
    <div class="mx-auto" style="border: 1px solid blue; background-color: white; width: 80%; padding-right: 30px; ">
        <pre class="my-2" style="font-size: large; color: green;">
            {
                "name": "lead-manager",
                "version": "1.0.0",
                "description": "",
                "main": "index.js",
                "scripts": {
                    "dev": "webpack --mode development <span style="background-color: yellow;">--watch</span> ./myproject/frontend/src/index.js 
                            --output ./myproject/frontend/static/frontend/main.js",
                    "build": "webpack --mode production ./myproject/frontend/src/index.js --output 
                            ./myproject/frontend/static/frontend/main.js"
                },
                "author": "",
                "license": "ISC",
                "devDependencies": {
                    "@babel/core": "^7.9.6",
                    "@babel/preset-env": "^7.9.6",
                    "@babel/preset-react": "^7.9.4",
                    "babel-loader": "^8.1.0",
                    "babel-plugin-transform-class-properties": "^6.24.1",
                    "webpack": "^4.43.0",
                    "webpack-cli": "^3.3.11"
                },
                "dependencies": {
                    "prop-types": "^15.7.2",
                    "react": "^16.13.1",
                    "react-dom": "^16.13.1"
                }
            }</pre>
    </div>
    <h1 class="text-center mx-3 mt-2" style="color: blue; font-weight: 400;">Everything is done now..... Enjoy coding
        your project...</h1>
    <h1 class="text-center mx-3" style="color: blue; font-size: 50px; font-weight: 400;">Thank you</h1>
    <hr color="blue">
    <div class="mx-auto">
        <h4 style="color: blue;">By...</h4>
        <h4>Saurav Kumar Sharma</h4>
    </div>
</body>

</html>